<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gelato.app.rwmatr.order.dao.RwmatroMapper">

	<select id="rwmatrOrderList" resultType="RwmatroVO">
		SELECT RD.ORDER_ID AS ORDER_ID, 
		       R.NM, R.RWMATR_ID AS RWMATR_ID, 
		       RD.UNTPRC AS UNTPRC, 
		       RD.QY AS QY, 
		       V.VEND_NAME AS VEND_NAME, 
		       RO.ORDER_DT AS ORDER_DT, 
		       RO.DUDT AS DUDT
		FROM RWMATR_ORDER_DETA RD JOIN RWMATR_ORDER RO
		    ON(RD.ORDER_ID = RO.ORDER_ID)
		JOIN RWMATR R
		    ON(RD.RWMATR_ID = R.RWMATR_ID)
		JOIN VEND V
		    ON(R.VEND_ID = V.VEND_ID)
		ORDER BY 1 DESC
	</select>
	
	<select id="selectVendList" resultType="RwmatroVO">
		SELECT VEND_ID, VEND_NAME, REMK
			FROM VEND
		WHERE FG = 'VEND01'
	</select>
	
	<!-- <insert id="insertRwmatro" parameterType="RwmatroVO">
		<selectKey keyProperty="orderId" resultType="" order="BEFORE">
			SELECT 'OAF-'||TO_CHAR(SYSDATE,'YYYYMMDD-')||
					(SELECT LPAD(MAX(TO_NUMBER(SUBSTR(ORDER_ID, -3))) +1, 3, 0) 
			FROM RWMATR_ORDER) as order_id FROM DUAL
		</selectKey>
		INSERT INTO RWMATR_ORDER (ORDER_ID, ORDER_DT, DUDT) 
			VALUES(#{orderId},sysdate,#{dudt})
	</insert> -->
	
	<!-- <insert id="insertRwmatroDeta" parameterType="RwmatroVO">
		<selectKey keyProperty="rwmatrOrderDetaId" resultType="string" order="BEFORE">
			SELECT 'OAD-'||TO_CHAR(SYSDATE,'YYYYMMDD-')||
					(SELECT LPAD(MAX(TO_NUMBER(SUBSTR(ORDER_ID, -3))) +1, 3, 0) 
			FROM RWMATR_ORDER) as rwmatr_order_deta_id FROM DUAL
		</selectKey>
		INSERT INTO RWMATR_ORDER_DETA (
										RWMATR_ORDER_DETA_ID
										ORDER_ID, 
										RWMATR_ID,
										UNTPRC, 
										QY) 
								VALUES (
										#{rwmatrOrderDetaId},
										#{orderId},
										#{rwmatrId},
										#{untprc},
										#{qy}
										)
	</insert> -->
	
	<!-- <update id="updateRwmatroDeta" parameterType="RwmatroVO">
			
	</update>
	
	<delete id="deleteRwmatroDeta" parameterType="RwmatroVO">
		
	</delete> -->

</mapper>