<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gelato.app.com.mkLot.dao.MkLotMapper">

<select id="findLot" resultType="MkLotVO">
	SELECT LCLSF || '-' || MCLSF || '-' || SCLSF || '-' || TO_CHAR(sysdate,'rrMMdd') || '-' as clsf,
			 TO_CHAR((SELECT MAX(NVL(seq,0))+1 
					 FROM gv_lot 
					 WHERE dt = trunc(sysdate)),'FM000')  as seq
	FROM item_clsf
	WHERE item_id = UPPER(#{itemId})
</select>

</mapper>