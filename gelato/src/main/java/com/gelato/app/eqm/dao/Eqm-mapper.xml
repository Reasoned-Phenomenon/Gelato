<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gelato.app.eqm.dao.EqmMapper">

	<!-- 설비 등록 페이지 - 설비등록 -->
	<insert id="insertEqm" parameterType="Eqm">
		insert into eqm(EQM_ID, EQM_NAME, model_no, VEND_ID, TEMP_MAX, TEMP_MIN, CHCK_PERD, REG_DT, MNGR, EQM_IMG, PURC_DT, FG, SPEC, USE_YN, UPH)
		values(#{eqmId},#{eqmName},#{modelNo},#{vendId},#{tempMax},#{tempMin},#{chckPerd},#{regDt},#{mngr},#{eqmImg},#{purcDt},#{fg},#{spec},#{useYn},#{uph})
	</insert>
	
	<!-- 설비 등록 페이지 - 설비구분 공통코드 목록조회 -->
<!-- 	<select>
		select code, code_nm from COMTCCMMNDETAILCODE where code_id = 'EQM002'
	</select>

	<!--설비 관리 페이지 - 설비조회  -->
<!-- 	<select>
		select e.eqm_id, e.eqm_name, p.prcs_id, p.name, e.use_yn, e.fg 
		from Eqm e, prcs p 
		where e.eqm_id = p.eqm_id 
	<where>
		<if test='gubun ="전체"'>
		</if>
		<if test='gubun ="배합"'>
			and e.fg = 'CLAS01'
		</if>
		<if test='gubun ="운송"'>
			and e.fg = 'CLAS02'
		</if>
	</where>
	</select>
	
	설비 관리 페이지 - 설비 한 건 조회(모달창)
	<select>
		select e.*, p.prcs_id, p.name
		from eqm e, prsc p 
		where e.eqm_id = p.eqm_id
		and e.eqm_id = #{value}클릭시 넘긴 인자값
	</select>
	
	설비 관리 페이지 - 설비 한 건 조회(모달창) 수정
	<update>
		update eqm set
		temp_max = #{tempMax},
		temp_min = #{tempMin},
		chck_perd = #{chckPerd},
		eqm_img = #{eqmImg},
		use_yn = #{useYn}
		where eqm_id = #{eqmId}
	</update>
	
	설비 관리 페이지 - 설비 한 건 조회(모달창) 삭제
	<delete>
		delete from eqm 
		where eqm_id = #{eqmId}
	</delete>
	
	실시간 설비상태 - 온도
	<select>
		select temp_now 
		from eqm_st_now
		where eqm_id = #{value} 선택한 설비명 인자값
	</select>
	
	실시간 설비상태 - UPH
	<select>
		select UPH 
		from UPH_cal
		where eqm_id = #{value} 선택한 설비명 인자값
	</select>
	
	실시간 설비상태 - 생산량
	<select>
		select prod_qy
		from eqm_st_now
		where eqm_id = #{value} 선택한 설비명 인자값
	</select>
	
	점검페이지관리/비가동페이지관리 - 등록 전 조회
	<select>
		select e.eqm_id, e.eqm_name, p.prcs_id, p.name, e.fg 
		from Eqm e, prcs p 
		where e.eqm_id = p.eqm_id 
	<where>
		<if test='gubun ="전체"'>
		</if>
		<if test='gubun ="배합"'>
			and e.fg = 'CLAS01'
		</if>
		<if test='gubun ="운송"'>
			and e.fg = 'CLAS02'
		</if>
	</where>
	
	점검페이지관리 - 점검 한 건 조회
	<select>
		select eqm_id, eqm_name  
		from eqm 
		and eqm_id = #{value}클릭시 넘긴 인자값
	</select>
	
	점검페이지관리 - 점검등록
	<insert>
	 insert into chck(EQM_ID, CHCK_DT, CHCK_DETA, JUDT, INSPR) 
	 values(#{eqmId}, sysdate, #{chckDeta}, #{judt}, #{inspr})
	</insert>
	
	점검페이지관리/비가동페이지관리 - 비가동등록
	<insert>
		insert into eqm_non_opr(EQM_NON_OPR_ID, EQM_ID, NON_OPR_FR_TM, REMK, NON_OPR_TO_TM, RESN_ID)
		values(EQM_NON_OPR_ID_seq.nextval, #{eqmId}, #{value}, #{remk}, sysdate, #{resnId})
	</insert>
	
	점검내역조회
	<select>
		select * 
		from chck
		where eqm_id = #{eqmId}
	</select>
	
	비가동내역조회
	<select>
		select *
		from eqm_non_opr
		where eqm_id = #{eqmId}
	</select> -->
		
</mapper>